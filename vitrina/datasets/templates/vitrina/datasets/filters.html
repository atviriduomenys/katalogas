{% load i18n %}
{% load util_tags %}

{% if stats %}
<nav class="category-panel">
  <a href="{% url 'dataset-list' %}?{{ request.GET.urlencode }}">
    <p class="category-panel-heading">
      <strong>&lt;- {% translate "Atgal į rinkinių sąrašą" as orgTitle %} {{orgTitle|upper}}</strong>
    </p>
  </a>
</nav>
{% endif %}

{% if user.organization %}
<nav class="category-panel">
    <a href="{% url 'organization-datasets' user.organization.pk %}" id="org-dataset-url">
        <p class="category-panel-heading">
            {% translate "Mano organizacijos rinkiniai" %}
        </p>
    </a>
</nav>
{% endif %}

{% if user.can_see_manager_dataset_list_url %}
<nav class="category-panel">
    <a href="{% url 'manager-dataset-list' %}" id="manager-dataset-url">
        <p class="category-panel-heading">
            {% translate "Mano tvarkomi rinkiniai" %}
        </p>
    </a>
</nav>
{% endif %}



{# include "vitrina/datasets/partials/filter.html" with #}
{# name='status' #}
{# title=status_filter #}
{# stats_url_name='dataset-status-stats' #}
{# id='Dataset-status-stats' #}
{# facet=status_facet #}
{# selected=selected_status #}

{% for filter in filters %}
<nav class="category-panel mb-5" id="filter_id">

  {% if filter.stats and active_filter != filter.name %}
  <a href="{{ filter.get_stats_url }}" id="dataset-{{ filter.name }}-stats">
  {% endif %}
    <p class="{{ filter.name }}-panel-heading">
        <span class="icon-text">
        {% if filter.stats %}
        <span class="icon">
          <i class="fas fa-chart-bar fa-lg"></i>
        </span>
        {% endif %}
        <span class="has-text-weight-bold">
          {{ filter.title }}
        </span>
      </span>
    </p>
  {% if active_filter != filter.name %}
  </a>
    {% if filter.name == 'jurisdiction' or filter.name == 'organization' or filter.name == 'category' or filter.name == 'tags' %}
        <input
            class="input"
            id="{{ filter.name }}-filter-input"
            placeholder="{% translate "Paieška" %}..."
        >
    {% endif %}
  {% endif %}

  {% for item in filter.items %}
      {% if item.hidden %}
      <div class="columns is-gapless is-hidden  m-0 mt-1">
      {% else %}
      <div class="columns is-gapless  m-0 mt-1">
      {% endif %}

        <div class="column is-1">
            <a href="{{ item.url }}" class="has-text-dark">
              {% if item.selected %}
              <span class="icon">
                <i class="far fa-check-square"></i>
              </span>
              {% else %}
              <span class="icon">
                <i class="far fa-square"></i>
              </span>
              {% endif %}
            </a>
        </div>

        <div class="column is-9">

          {% if item.selected %}
          <a href="{{ item.url }}" class="category-panel-block has-text-weight-bold has-text-dark" id="{{ item.name }}_id">
          {% else %}
          <a href="{{ item.url }}" class="category-panel-block has-text-grey" id="{{ item.name }}_id">
          {% endif %}

            {% if filter.name == 'level' %}
              <span class="icon-text">
                {% for star in item.value|range %}
                <i class="fas fa-star"></i>
                {% endfor %}
              </span>

            {% else %}
              {{ item.title }}
            {% endif %}
          </a>
        </div>

        <div class="column is-2 has-text-right">
          <span class="is-size-6">({{ item.count }})</span>
        </div>
  </div>
  {% endfor %}

</nav>

{% endfor %}
