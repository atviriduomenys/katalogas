{% extends "base.html" %}
{% load i18n parler_tags %}

{% block pageTitle %} | {% translate "Duomenų rinkinių valdymo sritys" %}{% endblock %}
{% block pageOgTitle %} | {% translate "Duomenų rinkinių valdymo sritys" %}{% endblock %}

{% block current_title %}
{% translate "Duomenų rinkinių valdymo sritys" %}
{% endblock %}

{% block content %}
    {% if request.resolver_match.url_name == 'organization-datasets' %}
        {% include 'vitrina/orgs/tabs.html' %}
    {% endif %}
    <div class="columns">
        <div class="column is-one-quarter is-hidden-mobile">
            {% include "vitrina/datasets/filters.html" %}
        </div>
        <div class="column is-three-quarters">
            {% include "vitrina/datasets/stats_parameter_select.html" %}
            <div class="is-flex">
                <span>{% translate "Įkėlimo data" %}</span>
                <div class="stays-right">{% translate "Duomenų rinkinių sk." %}</div>
            </div>
        {% for y, yv in year_stats.items %}
            {% if selected_year %}
                {% if selected_year in y %}
                    <div class="is-flex">
                        <a href="/datasets/stats/publication/quarter/{{ y }}"
                            id="{{ y }}_id">
                            <strong style="color: black;">
                                {% if 'Q1' in y %}
                                    I
                                {% elif 'Q2' in y %}
                                    II
                                {% elif 'Q3' in y %}
                                    III
                                {% else %}
                                    IV
                                {% endif %}
                            {% translate "ketvirtis" %}
                            </strong>
                        </a>
                        <div class="stays-right"><a href="/datasets/{{ y }}">{{ yv }}</a></div>
                    </div>
                    <progress class="progress is-info"
                              value="{{ yv }}"
                              max="{{ max_count }}"></progress>
                {% endif %}
            {% elif selected_quarter %}
                {% for m, mv in yv.items reversed %}
                    <div class="is-flex">
                            <strong style="color: black;">
                                {% if '01' in m|slice:"5:" %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-01-01&date_to={{ m|slice:":4" }}-01-31">
                                        {% translate "Sausis" %}
                                    </a>
                                {% elif '02' in m|slice:"5:" %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-02-01&date_to={{ m|slice:":4" }}-02-28">
                                        {% translate "Vasaris" %}
                                    </a>
                                {% elif '03' in m|slice:"5:" %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-03-01&date_to={{ m|slice:":4" }}-03-31">
                                        {% translate "Kovas" %}
                                    </a>
                                {% elif '04' in m|slice:"5:" %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-04-01&date_to={{ m|slice:":4" }}-04-31">
                                        {% translate "Balandis" %}
                                    </a>
                                {% elif '05' in m|slice:"5:" %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-05-01&date_to={{ m|slice:":4" }}-05-31">
                                        {% translate "Gegužė" %}
                                    </a>
                                {% elif '06' in m %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-06-01&date_to={{ m|slice:":4" }}-06-31">
                                        {% translate "Birželis" %}
                                    </a>
                                {% elif '07' in m %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-07-01&date_to={{ m|slice:":4" }}-07-31">
                                        {% translate "Liepa" %}
                                    </a>
                                {% elif '08' in m %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-08-01&date_to={{ m|slice:":4" }}-08-31">
                                        {% translate "Rugpjūtis" %}
                                    </a>
                                {% elif '09' in m %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-09-01&date_to={{ m|slice:":4" }}-09-31">
                                        {% translate "Rugsėjis" %}
                                    </a>
                                {% elif '10' in m %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-10-01&date_to={{ m|slice:":4" }}-10-31">
                                        {% translate "Spalis" %}
                                    </a>
                                {% elif '11' in m %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-11-01&date_to={{ m|slice:":4" }}-11-31">
                                        {% translate "Lapkritis" %}
                                    </a>
                                {% else %}
                                    <a id="{{ m }}_id" href="/datasets/?date_from={{ m|slice:":4" }}-12-01&date_to={{ m|slice:":4" }}-12-31">
                                        {% translate "Gruodis" %}
                                    </a>
                                {% endif %}
                            </strong>
                        <div class="stays-right"><a href="/datasets/{{ m }}">{{ mv }}</a></div>
                    </div>
                    <progress class="progress is-info"
                              value="{{ mv }}"
                              max="{{ max_count }}"></progress>
                {% endfor %}
            {% else %}
                <div class="is-flex">
                    <a href="/datasets/stats/publication/year/{{ y }}"
                        id="{{ y }}_id">
                        <strong style="color: black;">{{ y }}</strong>
                    </a>
                    <div class="stays-right"><a href="/datasets/{{ y }}">{{ yv }}</a></div>
                </div>
                <progress class="progress is-info"
                          value="{{ yv }}"
                          max="{{ max_count }}"></progress>
            {% endif %}
        {% endfor %}
        </div>
    </div>
{% endblock %}
