{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block current_title %}{% translate "Prisijungimas" %}{% endblock %}

{% block head %}
    <style>
        .hidden-fields {
            display: none;
        }
    </style>
{% endblock %}

{% block content %}
<div class="columns is-centered">
    <div class="column is-one-quarter">
        <div class="content is-small">
            <b>{% translate "Registruotis" %}</b>
            <p>{% translate "Jeigu norite ne tik peržvelgti atvirų duomenų rinkinius skelbiamus šiame portale, bet ir pateikti panaudojimo atvejį, pateikti poreikį duomenų rinkiniui ir kt. rekomenduojame užsiregistruoti." %}</p>
            <p>
                <a href="{% url 'register' %}" class="button is-small is-primary">{% translate "Registruotis" %}</a>
            </p>
        </div>
        <div class="content is-small">
            <b>{% translate "Pamiršote slaptažodį?" %}</b>
            <p>{% translate "Jeigu pamiršote slaptažodį, užpildykite formą ir naują slaptažodį gausite el. paštu." %}</p>
            <p>
                <a href="{% url 'reset' %}" class="button is-small is-primary">{% translate "Atstatyti slaptažodį" %}</a>
            </p>
        </div>
        <div class="content is-small">
            <b>{% translate "Norite prisijungti su kita platforma?" %}</b>
            <p>{% translate "Jeigu norite prisijungti su duomenimis iš kitos platformos tai galite padaryti čia." %}</p>
            <p>
                <a id="viisp-login" href="{% url 'viisp_login' %}" class="button is-small is-primary">{% translate "Prisijungti su VIISP" %}</a>
            </p>
        </div>
    </div>
    <div class="column is-half">
        <div class="content">
            <p>{% translate "Tai puslapis skirtas prisijungti arba užsiregistruoti naujam naudotojui, kuris nori neribotai, bei laisvai dalintis informacija, kurią vėliau savo tikslais galėtų naudoti bet kuris suinteresuotas asmuo ar organizacija. Jei kuriate naują naudotoją, svarbu pateikti teisingus duomenis (pvz. el. pašto adresas, kuris bus naudojamas pranešimams iš portalo siųsti). Jei susiduriate su problema parašykite adresu " %}
                <a href="mailto:atviriduomenys@vssa.lt">atviriduomenys@vssa.lt</a>.
            </p>
        </div>

        <form method="POST" id="login-form">
            {% if form.non_field_errors %}
                <div class="has-text-danger py-3">
                    {% if form_error_title %}<div class="has-text-weight-bold">{{ form_error_title }}</div>{% endif %}
                    <ul>
                        {{ form.non_field_errors|unordered_list }}
                    </ul>
                </div>
            {% endif %}
            {% csrf_token %}
            {% if form.get_user %}
                <div class="hidden-fields">
                    {{ form.username|as_crispy_field }}
                    {{ form.password|as_crispy_field }}
                </div>
            {% else %}
                {{ form.username|as_crispy_field }}
                {{ form.password|as_crispy_field }}
            {% endif %}
            {% if form.get_user %}
                {{ form.otp_token|as_crispy_field }}
            {% endif %}
            <div class="is-inline-block mt-3">
                {% if form.get_user %}
                    <input type="submit" value="{% translate 'Prisijungti' %}" class="button is-primary"/>
                {% else %}
                    <input type="submit" name="otp_challenge" value="{% translate 'Prisijungti' %}" class="button is-primary"/>
                {% endif %}
            </div>
        </form>
    </div>
</div>
{% endblock %}
